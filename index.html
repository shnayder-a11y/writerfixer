<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="iDQd6KwxogkCOl2fI0kQ53DwaNwaAG8ET0jLrv_bvS4" />
    <title>WriteFixer - Fix Your English Easily For Free</title>
    <style>
        /* Existing styles from base_code.html */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 0;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .logo-text h1 {
            font-size: 28px;
            color: #2d3748;
            margin: 0;
        }

        .logo-text p {
            font-size: 14px;
            color: #718096;
            margin: 0;
            font-weight: 600;
        }

        .free-badge {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 20px;
            align-items: center;
        }

        nav a {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            transition: color 0.3s ease;
            padding: 10px 20px;
            border-radius: 8px;
        }

        nav a:hover {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }

        .login-btn {
            background: linear-gradient(45deg, #667eea, #764ba2) !important;
            color: white !important;
            padding: 12px 30px !important;
            border-radius: 25px !important;
            font-weight: 600 !important;
            font-size: 16px !important;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
            background: linear-gradient(45deg, #5a67d8, #6b46c1) !important;
        }

        /* Typing Animation */
        .typing-animation {
            text-align: center;
            margin: 40px 0;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .typing-text {
            font-size: 24px;
            color: white;
            font-weight: 600;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cursor {
            display: inline-block;
            background-color: white;
            margin-left: 3px;
            width: 3px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        /* Main Content */
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .hero {
            text-align: center;
            margin-bottom: 40px;
        }

        .hero h2 {
            font-size: 36px;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .hero p {
            font-size: 18px;
            color: #718096;
            max-width: 600px;
            margin: 0 auto 20px;
        }

        .powered-by {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            color: #667eea;
            font-weight: 600;
        }

        .gemini-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(45deg, #4285f4, #ea4335, #fbbc05, #34a853);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        /* Tool Interface */
        .tool-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .input-section, .output-section {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #e2e8f0;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .controls {
            display: flex;
            flex-direction: column; /* Changed to column for mode selector */
            align-items: center; /* Center items */
            gap: 20px;
            margin: 20px 0;
        }

        .main-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* NEW: Mode Selector Styles */
        .mode-selector {
            display: flex;
            gap: 10px;
            background: #e2e8f0;
            padding: 5px;
            border-radius: 25px;
        }

        .mode-btn {
            padding: 8px 20px;
            border-radius: 20px;
            border: none;
            background: transparent;
            color: #4a5568;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }


        /* Key Features Section */
        .key-features {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
        }

        .key-features h3 {
            color: #22543d;
            margin-bottom: 20px;
            text-align: center;
            font-size: 24px;
        }

        /* Features Grid */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 40px 0;
        }

        .feature-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            border: 2px solid #e2e8f0;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin: 0 auto 15px;
        }

        .feature-card h3 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .feature-card p {
            color: #718096;
            font-size: 14px;
            line-height: 1.6;
        }

        .learning-badge {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-top: 10px;
            display: inline-block;
        }

        /* About Section */
        .about {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .about h2 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 32px;
        }

        .about-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            text-align: center;
        }

        .about-card {
            background: #f7fafc;
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
        }

        .about-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .about-card p {
            color: #718096;
            line-height: 1.7;
        }

        /* Feedback Section */
        .feedback {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .feedback-btn {
            padding: 8px 16px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .feedback-btn:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .feedback-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* Grammar Tips */
        .tips {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .tips h4 {
            color: #22543d;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tips ul {
            color: #2f855a;
            padding-left: 20px;
        }

        .tips li {
            margin-bottom: 5px;
        }

        /* Footer */
        footer {
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 40px 0;
            text-align: center;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .footer-section p, .footer-section a {
            color: #a0aec0;
            text-decoration: none;
            line-height: 1.7;
        }

        .footer-section a:hover {
            color: #667eea;
        }

        .footer-bottom {
            border-top: 1px solid #4a5568;
            padding-top: 20px;
            color: #a0aec0;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }

            .tool-interface {
                grid-template-columns: 1fr;
            }

            .main-content, .about {
                padding: 25px;
            }

            .hero h2 {
                font-size: 28px;
            }

            .main-buttons { /* Updated for mobile */
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .login-content {
                width: 95%; /* Keep this, ensuring it doesn't exceed 95% of viewport width */
                /* Removed margin: 20px auto; from here as flexbox handles centering */
            }
            
            .login-header {
                padding: 25px 20px 15px; /* Reduced padding */
            }
            
            .login-body {
                padding: 25px 20px; /* Reduced padding */
            }
            
            .login-header h2 {
                font-size: 24px;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* UPDATED: Enhanced changes-list */
        .changes-list {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            max-height: 200px; /* Increased height */
            overflow-y: auto;
        }

        .changes-list h5 {
            color: #c53030;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .changes-list ul {
            font-size: 13px;
            color: #744210;
            padding-left: 15px;
        }
        
        /* UPDATED: Nested list styling for faults */
        .changes-list > ul > li {
            margin-bottom: 10px;
        }

        .changes-list > ul > li > ul {
            padding-left: 20px;
            margin-top: 5px;
        }
        
        /* NEW: Custom scrollbar for better visibility */
        .changes-list::-webkit-scrollbar {
            width: 8px;
        }

        .changes-list::-webkit-scrollbar-track {
            background: #ffebeb;
            border-radius: 10px;
        }

        .changes-list::-webkit-scrollbar-thumb {
            background: #f5a8a8;
            border-radius: 10px;
        }

        .changes-list::-webkit-scrollbar-thumb:hover {
            background: #e88484;
        }


        .error-message {
            background: #fed7d7;
            color: #c53030;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border: 1px solid #feb2b2;
            display: none; /* Initially hidden */
        }

        /* START: Enhanced Login Modal Styles (from login.html) */
        .login-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        .login-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .login-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            margin: 0;
            padding: 0;
            border-radius: 24px;
            width: 90%;
            max-width: 480px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            position: relative;
            animation: slideUp 0.4s ease;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        @keyframes slideUp {
            from { 
                transform: translateY(30px) scale(0.95); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
        }

        .login-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 40px 30px;
            text-align: center;
            position: relative;
        }

        .login-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }

        .close-btn {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .login-logo {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 24px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .login-header h2 {
            margin: 0 0 10px;
            font-size: 28px;
            font-weight: 700;
        }

        .login-header p {
            margin: 0;
            opacity: 0.9;
            font-size: 16px;
        }

        .login-body {
            padding: 40px;
        }

        .login-tabs {
            display: flex;
            margin-bottom: 30px;
            background: #f1f5f9;
            border-radius: 12px;
            padding: 4px;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
        }

        .tab-btn.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: #374151;
            font-weight: 600;
            font-size: 14px;
        }

        .input-wrapper {
            position: relative;
        }

        .form-group input {
            padding: 16px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #ffffff;
            width: 100%;
            box-sizing: border-box;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .form-group input::placeholder {
            color: #9ca3af;
        }

        .password-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #6b7280;
            font-size: 18px;
            transition: color 0.3s ease;
        }

        .password-toggle:hover {
            color: #667eea;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remember-me input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .remember-me label {
            font-size: 14px;
            color: #6b7280;
            cursor: pointer;
        }

        .forgot-password {
            color: #667eea;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .forgot-password:hover {
            color: #5a67d8;
        }

        .login-submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .login-submit::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .login-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .login-submit:hover::before {
            left: 100%;
        }

        .login-submit:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: #9ca3af;
            font-size: 14px;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e7eb;
        }

        .divider span {
            padding: 0 16px;
        }

        .social-login {
            display: flex;
            gap: 12px;
        }

        .social-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .social-btn:hover {
            border-color: #667eea;
            background: #f8fafc;
        }

        .signup-link {
            text-align: center;
            margin-top: 20px;
            color: #6b7280;
            font-size: 14px;
        }

        .signup-link a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }

        .signup-link a:hover {
            text-decoration: underline;
        }

        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            background: #f0fdf4;
            color: #16a34a;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #bbf7d0;
            font-size: 14px;
            display: none;
        }

        /* Mobile Responsive for Modal */
        @media (max-width: 768px) {
            .login-content {
                width: 95%; /* Ensure it doesn't exceed 95% of viewport width */
                /* No explicit margin top/bottom needed here, flexbox handles centering */
            }
            
            .login-header {
                padding: 25px 20px 15px; /* Reduced padding for smaller screens */
            }
            
            .login-body {
                padding: 25px 20px; /* Reduced padding for smaller screens */
            }
            
            .login-header h2 {
                font-size: 24px;
            }
        }
        /* END: Enhanced Login Modal Styles */
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">WF</div>
                    <div class="logo-text">
                        <h1>WriteFixer <span class="free-badge">FOR FREE</span></h1>
                        <p>Fix Your English Easily</p>
                    </div>
                </div>
                <nav>
                    <ul>
                        <!-- Changed href from login.html to # -->
                        <li><a href="#" id="loginBtn" class="login-btn">üîê Login</a></li>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- START: Enhanced Login Modal content moved from login.html -->
    <div id="loginModal" class="login-modal">
        <div class="login-content">
            <div class="login-header">
                <span class="close-btn" id="closeLogin">√ó</span>
                <div class="login-logo">WF</div>
                <h2>Welcome Back!</h2>
                <p>Sign in to enhance your writing with AI</p>
            </div>
            
            <div class="login-body">
                <div class="login-tabs">
                    <button class="tab-btn active" id="loginTab">Sign In</button>
                    <button class="tab-btn" id="signupTab">Sign Up</button>
                </div>

                <!-- Error/Success Messages for LOGIN MODAL -->
                <div id="modalErrorMessage" class="error-message"></div>
                <div id="modalSuccessMessage" class="success-message"></div>

                <!-- Login Form -->
                <div id="loginForm" class="tab-content active">
                    <form class="login-form" id="loginFormElement">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" name="email" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <div class="input-wrapper">
                                <input type="password" id="loginPassword" name="password" placeholder="Enter your password" required>
                                <span class="password-toggle" id="toggleLoginPassword">üëÅÔ∏è</span>
                            </div>
                        </div>
                        <div class="form-options">
                            <div class="remember-me">
                                <input type="checkbox" id="rememberMe" name="rememberMe">
                                <label for="rememberMe">Remember me</label>
                            </div>
                            <a href="#" class="forgot-password" id="forgotPassword">Forgot password?</a>
                        </div>
                        <button type="submit" class="login-submit" id="loginSubmitBtn">
                            <span class="loading-spinner" id="loginSpinner"></span>
                            <span id="loginBtnText">Sign In</span>
                        </button>
                    </form>

                    <div class="divider">
                        <span>or continue with</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn" id="googleLogin">
                            <span>üîó</span> Google
                        </button>
                        <button class="social-btn" id="githubLogin">
                            <span>üêô</span> GitHub
                        </button>
                    </div>
                </div>

                <!-- Signup Form -->
                <div id="signupForm" class="tab-content">
                    <form class="login-form" id="signupFormElement">
                        <div class="form-group">
                            <label for="signupName">Full Name</label>
                            <input type="text" id="signupName" name="name" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label for="signupEmail">Email Address</label>
                            <input type="email" id="signupEmail" name="email" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <div class="input-wrapper">
                                <input type="password" id="signupPassword" name="password" placeholder="Create a password" required>
                                <span class="password-toggle" id="toggleSignupPassword">üëÅÔ∏è</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <div class="input-wrapper">
                                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                                <span class="password-toggle" id="toggleConfirmPassword">üëÅÔ∏è</span>
                            </div>
                        </div>
                        <button type="submit" class="login-submit" id="signupSubmitBtn">
                            <span class="loading-spinner" id="signupSpinner"></span>
                            <span id="signupBtnText">Create Account</span>
                        </button>
                    </form>

                    <div class="divider">
                        <span>or sign up with</span>
                    </div>

                    <div class="social-login">
                        <button class="social-btn" id="googleSignup">
                            <span>üîó</span> Google
                        </button>
                        <button class="social-btn" id="githubSignup">
                            <span>üêô</span> GitHub
                        </button>
                    </div>
                </div>

                <div class="signup-link" id="signup-link-container">
                    <span id="switchText">Don't have an account? <a href="#" id="switchLink">Sign up free</a></span>
                </div>
            </div>
        </div>
    </div>
    <!-- END: Enhanced Login Modal content moved from login.html -->

    <!-- Typing Animation -->
    <div class="container">
        <div class="typing-animation">
            <div class="typing-text" id="typingText">
                <span class="cursor"></span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-content" id="home">
            <div class="hero">
                <h2>Perfect Your English Writing</h2>
                <p>Instantly improve grammar, spelling, and style with our AI-powered writing assistant. Make your writing clear, professional, and error-free.</p>
                <div class="powered-by">
                    <div class="gemini-icon">AI</div>
                    <span id="poweredByText">Powered by Google Gemini</span>
                </div>
            </div>

            <!-- New Error Message Div for Main Content -->
            <div id="mainErrorMessage" class="error-message"></div>

            <div class="tool-interface">
                <div class="input-section">
                    <div class="section-title">
                        <div class="section-icon">‚úèÔ∏è</div>
                        Your Text
                    </div>
                    <textarea id="inputText" placeholder="Paste or type your text here to get it enhanced...

Example: 'I am going to the store and buy some groceries for my family because we dont have nothing to eat.'"></textarea>
                    <div class="tips">
                        <h4>üí° Quick Tips:</h4>
                        <ul>
                            <li>Paste any text from emails, essays, or messages</li>
                            <li>Works with any length - from sentences to paragraphs</li>
                            <li>Supports formal and casual writing styles</li>
                            <!-- New tip for Ctrl+Enter -->
                            <li>Use <kbd>Ctrl</kbd> + <kbd>Enter</kbd> to quickly enhance your text!</li>
                        </ul>
                    </div>
                </div>

                <div class="output-section">
                    <div class="section-title">
                        <div class="section-icon">‚ú®</div>
                        Enhanced Text
                    </div>
                    <textarea id="outputText" placeholder="Your enhanced text will appear here..." readonly></textarea>
                    <!-- Faults and Suggestions Box -->
                    <div id="changesInfo" class="changes-list" style="display: none;">
                        <h5 id="changesTitle">Faults Found:</h5>
                        <ul id="changesList"></ul>
                    </div>
                </div>
            </div>

            <div class="controls">
                <div class="mode-selector">
                    <button class="mode-btn active" id="beginnerModeBtn">üéì Beginner</button>
                    <button class="mode-btn" id="advancedModeBtn">üöÄ Advanced</button>
                </div>
                <div class="main-buttons">
                    <button class="btn btn-primary" id="fixTextBtn">
                        <span></span>
                        Enhance Text
                    </button>
                    <button class="btn btn-secondary" id="copyBtn" disabled>
                        <span>üìã</span>
                        Copy Result
                    </button>
                    <button class="btn btn-secondary" id="clearBtn">
                        <span>üóëÔ∏è</span>
                        Clear All
                    </button>
                </div>
            </div>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing and enhancing your text with AI...</p>
            </div>

            <div class="feedback">
                <div class="feedback-btn" id="thumbsUp">üëç Helpful</div>
                <div class="feedback-btn" id="thumbsDown">üëé Not Helpful</div>
            </div>

            <div class="key-features">
                <h3>üîë Key Features</h3>
                <div class="features" id="features">
                    <div class="feature-card">
                        <div class="feature-icon">üìù</div>
                        <h3>Grammar Check</h3>
                        <p>Fix grammar mistakes, verb tenses, and sentence structure automatically. We help you learn by showing exactly what was wrong and why.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üî§</div>
                        <h3>Spelling Correction</h3>
                        <p>Helping you know your spelling errors and correct them. Learn from common mistakes to improve your writing skills permanently.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ú®</div>
                        <h3><span>Style Enhancement</span></h3>
                        <p>Improve clarity, flow, and professional tone of your writing. Learn how to make your English sound more natural and confident.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3>Instant Results</h3>
                        <p>Get corrections in seconds, not minutes. Perfect for quick fixes and immediate learning from your mistakes.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üì±</div>
                        <h3>Mobile Friendly</h3>
                        <p>Works perfectly on all devices - desktop, tablet, and mobile. Learn and improve your English anywhere, anytime.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <h3>Privacy First</h3>
                        <p>Your text is processed securely and never stored permanently. Focus on learning without privacy concerns.</p>
                        <div class="learning-badge">üéì Learning Focus</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="about" id="about">
            <h2>About WriteFixer</h2>
            <div class="about-content">
                <div class="about-card">
                    <h3>üéØ Our Mission</h3>
                    <p>We believe everyone deserves to communicate clearly and confidently. WriteFixer makes professional-quality writing accessible to everyone, helping you learn and improve your English skills for free.</p>
                </div>
                <div class="about-card">
                    <h3>üîß How It Works</h3>
                    <p>Our advanced AI analyzes your text for grammar, spelling, punctuation, and style issues. It provides intelligent suggestions while explaining changes to help you learn.</p>
                </div>
                <div class="about-card">
                    <h3>üë• Who We Serve</h3>
                    <p>Students, professionals, non-native English speakers, and anyone who wants to improve their writing. From emails to essays, we help make your words shine while you learn.</p>
                </div>
            </div>
        </div>
    </div>

    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>WriteFixer</h3>
                    <p>Making English writing accessible and professional for everyone. Join thousands of users who trust WriteFixer for their daily writing needs and learning journey.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="#home">Home</a></p>
                    <p><a href="#about">About</a></p>
                    <p><a href="#features">Features</a></p>
                    <p><a href="mailto:contact@writefixer.com">Contact Us</a></p>
                </div>
                <div class="footer-section">
                    <h3>Support</h3>
                    <p><a href="#faq">FAQ</a></p>
                    <p><a href="#privacy">Privacy Policy</a></p>
                    <p><a href="#terms">Terms of Service</a></p>
                    <p><a href="mailto:support@writefixer.com">Get Help</a></p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>¬© 2025 WriteFixer. Created with ‚ù§Ô∏è to help you write better English. Powered by Google Gemini. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Gemini API Configuration
        const GEMINI_API_KEY = 'AIzaSyDVDKD_VQs4DQ0U-PnKedTpCLnMbn16BOA';
        const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";
        
        // Typing Animation Logic
        const phrases = [
            "Fix your grammar in seconds...",
            "Enhance your writing style...",
            "Eliminate spelling errors...",
            "Make your English perfect, easily!",
            "Write with confidence, every time."
        ];
        let phraseIndex = 0;
        let charIndex = 0;
        let isDeleting = false;
        const typingTextElement = document.getElementById('typingText');

        function typeEffect() {
            const currentPhrase = phrases[phraseIndex];
            let displayedText = currentPhrase.substring(0, charIndex);

            typingTextElement.textContent = displayedText;

            if (!isDeleting && charIndex < currentPhrase.length) {
                charIndex++;
                setTimeout(typeEffect, 100);
            } else if (isDeleting && charIndex > 0) {
                charIndex--;
                setTimeout(typeEffect, 50);
            } else if (!isDeleting && charIndex === currentPhrase.length) {
                isDeleting = true;
                setTimeout(typeEffect, 1500); // Pause at end of typing
            } else {
                isDeleting = false;
                phraseIndex = (phraseIndex + 1) % phrases.length;
                setTimeout(typeEffect, 500); // Pause before starting next phrase
            }
        }

        document.addEventListener('DOMContentLoaded', typeEffect);

        // Main Text Enhancement Logic
        const inputTextarea = document.getElementById('inputText');
        const outputTextarea = document.getElementById('outputText');
        const fixTextBtn = document.getElementById('fixTextBtn');
        const copyBtn = document.getElementById('copyBtn');
        const clearBtn = document.getElementById('clearBtn');
        const loadingDiv = document.getElementById('loading');
        const changesInfoDiv = document.getElementById('changesInfo');
        const changesListUl = document.getElementById('changesList');
        const changesTitle = document.getElementById('changesTitle');
        const loginBtnHeader = document.getElementById('loginBtn');
        const mainErrorMessageDiv = document.getElementById('mainErrorMessage');
        const modalErrorMessageDiv = document.getElementById('modalErrorMessage');
        const modalSuccessMessageDiv = document.getElementById('modalSuccessMessage');
        const beginnerModeBtn = document.getElementById('beginnerModeBtn');
        const advancedModeBtn = document.getElementById('advancedModeBtn');
        const poweredByText = document.getElementById('poweredByText');

        let currentMode = 'beginner'; // Default mode

        // Mode selector event listeners
        beginnerModeBtn.addEventListener('click', () => {
            currentMode = 'beginner';
            beginnerModeBtn.classList.add('active');
            advancedModeBtn.classList.remove('active');
            changesTitle.textContent = "Faults Found:";
        });

        advancedModeBtn.addEventListener('click', () => {
            currentMode = 'advanced';
            advancedModeBtn.classList.add('active');
            beginnerModeBtn.classList.remove('active');
            changesTitle.textContent = "Changes Made:";
        });


        // Event listener for Ctrl+Enter shortcut
        inputTextarea.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                fixTextBtn.click();
            }
        });

        fixTextBtn.addEventListener('click', async () => {
            const text = inputTextarea.value.trim();
            if (!text) {
                mainErrorMessageDiv.textContent = "Please enter some text to enhance.";
                mainErrorMessageDiv.style.display = 'block';
                setTimeout(() => mainErrorMessageDiv.style.display = 'none', 5000);
                return;
            }

            loadingDiv.style.display = 'block';
            fixTextBtn.disabled = true;
            copyBtn.disabled = true;
            outputTextarea.value = '';
            changesListUl.innerHTML = '';
            changesInfoDiv.style.display = 'none';
            mainErrorMessageDiv.style.display = 'none';

            try {
                // IMPORTANT: Changed to callGeminiAPI
                const response = await callGeminiAPI(text, currentMode);
                
                if (response.success) {
                    outputTextarea.value = response.enhancedText;
                    
                    changesListUl.innerHTML = '';
                    let faultsFound = false;

                    if (response.faults) {
                        for (const category in response.faults) {
                            if (response.faults[category] && response.faults[category].length > 0) {
                                faultsFound = true;
                                const categoryLi = document.createElement('li');
                                categoryLi.innerHTML = `<strong>${category}:</strong>`;
                                const subUl = document.createElement('ul');
                                
                                response.faults[category].forEach(faultText => {
                                    const faultLi = document.createElement('li');
                                    faultLi.textContent = faultText;
                                    subUl.appendChild(faultLi);
                                });
                                
                                categoryLi.appendChild(subUl);
                                changesListUl.appendChild(categoryLi);
                            }
                        }
                    }

                    if (faultsFound) {
                        changesInfoDiv.style.display = 'block';
                    } else {
                        const li = document.createElement('li');
                        li.textContent = "No specific faults were identified by the AI.";
                        changesListUl.appendChild(li);
                        changesInfoDiv.style.display = 'block';
                    }
                    
                    copyBtn.disabled = false;

                } else {
                    outputTextarea.value = "Error: Could not enhance text.";
                    mainErrorMessageDiv.textContent = response.message || "An unknown error occurred during enhancement.";
                    mainErrorMessageDiv.style.display = 'block';
                }
            } catch (error) {
                console.error("Error enhancing text:", error);
                outputTextarea.value = "An unexpected error occurred. Please try again.";
                mainErrorMessageDiv.textContent = `An unexpected error occurred: ${error.message}`;
                mainErrorMessageDiv.style.display = 'block';
            } finally {
                loadingDiv.style.display = 'none';
                fixTextBtn.disabled = false;
            }
        });

        copyBtn.addEventListener('click', () => {
            outputTextarea.select();
            document.execCommand('copy');
            const successDiv = modalSuccessMessageDiv; 
            successDiv.textContent = 'Enhanced text copied to clipboard!';
            successDiv.style.display = 'block';
            setTimeout(() => successDiv.style.display = 'none', 3000);
        });

        clearBtn.addEventListener('click', () => {
            inputTextarea.value = '';
            outputTextarea.value = '';
            copyBtn.disabled = true;
            changesListUl.innerHTML = '';
            changesInfoDiv.style.display = 'none';
            mainErrorMessageDiv.style.display = 'none';
        });

        // Function to call Gemini API
        async function callGeminiAPI(text, mode) {
            let promptContent = '';

            if (mode === 'advanced') {
                promptContent = `You are an expert editor for an advanced English speaker. Your task is to elevate the following text.
    
First, provide only the fully corrected and improved text. Refine the vocabulary, introduce idiomatic expressions where appropriate, and improve sentence structure for better flow and impact. Make it sound sophisticated and natural.

Then, after the corrected text, add a separator "---".

After the separator, list the changes you made. Use the following format:

**Vocabulary & Idioms:**
- [Explanation of word/idiom change 1]
- [Explanation of word/idiom change 2]

**Grammar & Syntax:**
- [Explanation of grammar/syntax change 1]

**Style & Flow:**
- [Suggestion for style/flow improvement 1]

If no changes are made in a category, omit it.

Text to enhance: "${text}"`;
            } else { // Beginner mode is the default
                promptContent = `Enhance the following English text for grammar, spelling, punctuation, and style.
    
First, provide only the fully corrected and improved text on its own.

Then, after the corrected text, add a separator "---".

After the separator, list the faults you found. Use the following format, providing bullet points for multiple items in a category:

**Spelling:**
- [detail of spelling error 1]
- [detail of spelling error 2]

**Grammar:**
- [detail of grammar error 1]

**Punctuation:**
- [detail of punctuation error 1]

**Style:**
- [suggestion for style improvement 1]

If no faults are found in a category, omit the category.

Text to enhance: "${text}"`;
            }

            try {
                const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        "contents": [{
                            "parts": [{
                                "text": promptContent
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    // Specific check for quota error (Too Many Requests)
                    if (response.status === 429) {
                        throw new Error("You have exceeded the free token quota. Please check your Google AI Platform account or try again later.");
                    }
                    let errorDetail = response.statusText;
                    try {
                        const errorData = await response.json();
                        errorDetail = errorData.error?.message || JSON.stringify(errorData);
                    } catch (e) {
                        console.log("Could not parse error response as JSON.");
                    }
                    throw new Error(`API error: ${response.status} - ${errorDetail}`);
                }

                const data = await response.json();
                
                // Safely access the response text
                if (data && data.candidates && data.candidates.length > 0 && data.candidates[0].content && data.candidates[0].content.parts && data.candidates[0].content.parts.length > 0 && data.candidates[0].content.parts[0].text) {
                    const fullResponseText = data.candidates[0].content.parts[0].text.trim();
                    
                    const parts = fullResponseText.split('---');
                    const enhancedText = parts[0].trim();
                    const faultsText = parts.length > 1 ? parts[1].trim() : '';

                    const faults = {};
                    if (faultsText) {
                        const lines = faultsText.split('\n');
                        let currentCategory = null;

                        for (const line of lines) {
                            const trimmedLine = line.trim();
                            const categoryMatch = trimmedLine.match(/^\*\*(.*):\*\*/);

                            if (categoryMatch) {
                                currentCategory = categoryMatch[1].trim();
                                faults[currentCategory] = [];
                            } else if (currentCategory && (trimmedLine.startsWith('-') || trimmedLine.startsWith('*'))) {
                                if (faults[currentCategory]) {
                                    faults[currentCategory].push(trimmedLine.substring(1).trim());
                                }
                            }
                        }
                    }

                    return {
                        success: true,
                        enhancedText: enhancedText,
                        faults: faults
                    };
                } else {
                    return {
                        success: false,
                        message: "Unexpected AI response format or no content received."
                    };
                }

            } catch (error) {
                console.error("Error calling Gemini API:", error);
                return {
                    success: false,
                    message: error.message
                };
            }
        }


        // Feedback buttons
        document.getElementById('thumbsUp').addEventListener('click', function() {
            this.classList.add('active');
            document.getElementById('thumbsDown').classList.remove('active');
            modalSuccessMessageDiv.textContent = 'Thank you for your feedback!';
            modalSuccessMessageDiv.style.display = 'block';
            setTimeout(() => modalSuccessMessageDiv.style.display = 'none', 3000);
        });

        document.getElementById('thumbsDown').addEventListener('click', function() {
            this.classList.add('active');
            document.getElementById('thumbsUp').classList.remove('active');
            modalErrorMessageDiv.textContent = 'Sorry to hear that. We will use your feedback to improve!';
            modalErrorMessageDiv.style.display = 'block';
            setTimeout(() => modalErrorMessageDiv.style.display = 'none', 3000);
        });

        // START: Enhanced Login Modal JavaScript
        class LoginModal {
            constructor() {
                this.modal = document.getElementById('loginModal');
                this.closeBtn = document.getElementById('closeLogin');
                this.loginTab = document.getElementById('loginTab');
                this.signupTab = document.getElementById('signupTab');
                this.loginForm = document.getElementById('loginForm');
                this.signupForm = document.getElementById('signupForm');
                this.switchLinkContainer = document.getElementById('signup-link-container');
                this.switchText = document.getElementById('switchText');
                
                this.initEventListeners();
            }

            initEventListeners() {
                loginBtnHeader.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.show();
                });
                
                this.closeBtn.addEventListener('click', () => this.hide());
                
                this.modal.addEventListener('click', (e) => {
                    if (e.target === this.modal) this.hide();
                });

                this.loginTab.addEventListener('click', () => this.switchTab('login'));
                this.signupTab.addEventListener('click', () => this.switchTab('signup'));
                
                this.switchLinkContainer.addEventListener('click', (e) => {
                    if (e.target && e.target.id === 'switchLink') {
                        e.preventDefault();
                        const currentTab = this.loginTab.classList.contains('active') ? 'signup' : 'login';
                        this.switchTab(currentTab);
                    }
                });

                this.initPasswordToggles();

                document.getElementById('loginFormElement').addEventListener('submit', (e) => this.handleLogin(e));
                document.getElementById('signupFormElement').addEventListener('submit', (e) => this.handleSignup(e));

                document.getElementById('googleLogin').addEventListener('click', () => this.handleSocialLogin('google'));
                document.getElementById('githubLogin').addEventListener('click', () => this.handleSocialLogin('github'));
                document.getElementById('googleSignup').addEventListener('click', () => this.handleSocialLogin('google'));
                document.getElementById('githubSignup').addEventListener('click', () => this.handleSocialLogin('github'));

                document.getElementById('forgotPassword').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.handleForgotPassword();
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && this.modal.classList.contains('show')) {
                        this.hide();
                    }
                });
            }

            initPasswordToggles() {
                const toggles = [
                    { toggle: 'toggleLoginPassword', input: 'loginPassword' },
                    { toggle: 'toggleSignupPassword', input: 'signupPassword' },
                    { toggle: 'toggleConfirmPassword', input: 'confirmPassword' }
                ];

                toggles.forEach(({ toggle, input }) => {
                    const toggleBtn = document.getElementById(toggle);
                    const inputField = document.getElementById(input);
                    
                    if (toggleBtn && inputField) {
                        toggleBtn.addEventListener('click', () => {
                            const isPassword = inputField.type === 'password';
                            inputField.type = isPassword ? 'text' : 'password';
                            toggleBtn.textContent = isPassword ? 'üôà' : 'üëÅÔ∏è';
                        });
                    }
                });
            }

            show() {
                this.modal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                setTimeout(() => {
                    const firstInput = this.modal.querySelector('.tab-content.active input:not([type="checkbox"])');
                    if (firstInput) firstInput.focus();
                }, 300);
            }

            hide() {
                this.modal.classList.remove('show');
                document.body.style.overflow = '';
                this.clearMessages();
            }

            switchTab(tab) {
                if (tab === 'login') {
                    this.loginTab.classList.add('active');
                    this.signupTab.classList.remove('active');
                    this.loginForm.classList.add('active');
                    this.signupForm.classList.remove('active');
                    this.switchText.innerHTML = 'Don\'t have an account? <a href="#" id="switchLink">Sign up free</a>';
                } else {
                    this.signupTab.classList.add('active');
                    this.loginTab.classList.remove('active');
                    this.signupForm.classList.add('active');
                    this.loginForm.classList.remove('active');
                    this.switchText.innerHTML = 'Already have an account? <a href="#" id="switchLink">Sign in</a>';
                }

                this.clearMessages();
            }

            async handleLogin(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                const rememberMe = document.getElementById('rememberMe').checked;

                this.setLoading(true, 'login');
                this.clearMessages();

                try {
                    await this.simulateApiCall();
                    
                    const response = await this.loginUser(email, password, rememberMe);
                    
                    if (response.success) {
                        this.showSuccess('Login successful! Welcome back.');
                        setTimeout(() => {
                            this.hide();
                            this.onLoginSuccess(response.user);
                        }, 1500);
                    } else {
                        this.showError(response.message || 'Login failed. Please try again.');
                    }
                } catch (error) {
                    this.showError('An error occurred. Please try again.');
                } finally {
                    this.setLoading(false, 'login');
                }
            }

            async handleSignup(e) {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const password = document.getElementById('signupPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;

                if (password !== confirmPassword) {
                    this.showError('Passwords do not match.');
                    return;
                }

                if (password.length < 6) {
                    this.showError('Password must be at least 6 characters long.');
                    return;
                }

                this.setLoading(true, 'signup');
                this.clearMessages();

                try {
                    await this.simulateApiCall();
                    
                    const response = await this.signupUser(name, email, password);
                    
                    if (response.success) {
                        this.showSuccess('Account created successfully! Please check your email to verify your account.');
                        setTimeout(() => {
                            this.switchTab('login');
                        }, 2000);
                    } else {
                        this.showError(response.message || 'Signup failed. Please try again.');
                    }
                } catch (error) {
                    this.showError('An error occurred. Please try again.');
                } finally {
                    this.setLoading(false, 'signup');
                }
            }

            async handleSocialLogin(provider) {
                this.showSuccess(`Redirecting to ${provider} login...`);
                
                setTimeout(() => {
                    alert(`${provider} login would be implemented here`);
                }, 1000);
            }

            handleForgotPassword() {
                const email = prompt('Enter your email address:');
                if (email) {
                    this.showSuccess('Password reset link sent to your email!');
                }
            }

            async simulateApiCall() {
                return new Promise(resolve => setTimeout(resolve, 1500));
            }

            async loginUser(email, password, rememberMe) {
                console.log(`Attempting login for: ${email}, Remember Me: ${rememberMe}`);
                if (email === "test@example.com" && password === "password123") {
                    return {
                        success: true,
                        user: { email, name: 'Test User' }
                    };
                } else {
                    return {
                        success: false,
                        message: "Invalid email or password."
                    };
                }
            }

            async signupUser(name, email, password) {
                console.log(`Attempting signup for: ${name}, ${email}`);
                if (email.includes("@") && password.length >= 6) {
                    return {
                        success: true,
                        user: { name, email }
                    };
                } else {
                    return {
                        success: false,
                        message: "Invalid signup data."
                    };
                }
            }

            setLoading(loading, form) {
                const spinner = document.getElementById(`${form}Spinner`);
                const btnText = document.getElementById(`${form}BtnText`);
                const btn = document.getElementById(`${form}SubmitBtn`);

                if (loading) {
                    spinner.style.display = 'block';
                    btnText.textContent = form === 'login' ? 'Signing in...' : 'Creating account...';
                    btn.disabled = true;
                } else {
                    spinner.style.display = 'none';
                    btnText.textContent = form === 'login' ? 'Sign In' : 'Create Account';
                    btn.disabled = false;
                }
            }

            showError(message) {
                modalErrorMessageDiv.textContent = message;
                modalErrorMessageDiv.style.display = 'block';
                modalSuccessMessageDiv.style.display = 'none'; 
                setTimeout(() => modalErrorMessageDiv.style.display = 'none', 5000);
            }

            showSuccess(message) {
                modalSuccessMessageDiv.textContent = message;
                modalSuccessMessageDiv.style.display = 'block';
                modalErrorMessageDiv.style.display = 'none'; 
                setTimeout(() => modalSuccessMessageDiv.style.display = 'none', 5000);
            }

            clearMessages() {
                modalErrorMessageDiv.style.display = 'none';
                modalSuccessMessageDiv.style.display = 'none';
            }

            onLoginSuccess(user) {
                console.log('User logged in:', user);
                this.showSuccess(`Welcome back, ${user.name || user.email}!`);
                setTimeout(() => {
                    this.hide();
                    loginBtnHeader.textContent = `Hello, ${user.name || 'User'}!`;
                    loginBtnHeader.style.background = 'linear-gradient(45deg, #48bb78, #38a169)';
                    loginBtnHeader.removeEventListener('click', (e) => { e.preventDefault(); this.show(); });
                    loginBtnHeader.href = '#';
                }, 1500);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            new LoginModal();
        });
        // END: Enhanced Login Modal JavaScript
    </script>
</body>
</html>
